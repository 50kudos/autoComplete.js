var a,b;a=this,b=function(){"use strict";function i(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var a=function(){return document.querySelector("#autoComplete")},s=function(){return a().value=""},n=function(){document.querySelector("#autoComplete_results_list").innerHTML=""},r=a,o=function(t){var e=document.createElement("ul");e.setAttribute("id","autoComplete_results_list"),t.destination.insertAdjacentElement(t.position,e)},l=function(s,i,n){var r=document.querySelector("#autoComplete_results_list");s.forEach(function(t,e){var a=document.createElement("li");a.setAttribute("data-".concat(n.tag),n.value||i[e]),a.setAttribute("id",i[e]),a.setAttribute("class","autoComplete_result"),a.innerHTML=s[e],r.appendChild(a)})},u=function(e){document.querySelectorAll(".autoComplete_result").forEach(function(t){t.addEventListener("click",function(t){e(t.target.closest(".autoComplete_result")),s(),n(),a().setAttribute("placeholder","".concat(t.target.closest(".autoComplete_result").id))})})},c=n,h=function(t){document.querySelector("body").innerHTML='\n\t\t<div class="autoComplete_error">\n\t\t\t<div class="autoComplete_message"><strong>Error</strong>, '.concat(t,"</div>\n\t\t</div>\n\t")};return function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSrc=function(){return Array.isArray(t.dataSrc)?t.dataSrc:Array.isArray(t.dataSrc())?t.dataSrc():void 0},this.searchEngine="loose"===t.searchEngine?"loose":"strict",this.renderResults=o(t.renderResults?{destination:t.renderResults.destination,position:t.renderResults.position}:{destination:r(),position:"afterend"}),this.placeHolder=!!String(t.placeHolder)&&t.placeHolder,this.maxResults=Number(t.maxResults)?t.maxResults:10,this.highlight=!0===t.highlight,this.dataAttribute=t.dataAttribute===Object?{tag:t.dataAttribute.tag,value:t.dataAttribute.value}:{tag:"autocomplete",value:""},this.onSelection=t.onSelection,this.init()}var t,a,s;return t=e,(a=[{key:"search",value:function(t,e){if("loose"===this.searchEngine){t=t.replace(/ /g,"").toLowerCase();for(var a=[],s=0,i=0;i<e.length;i++){var n=e[i];s<t.length&&n.toLowerCase()===t[s]&&(this.highlight&&(n='<span class="autoComplete_highlighted_result">'.concat(n,"</span>")),s++),a.push(n)}return s!==t.length?"":a.join("")}e.toLowerCase().includes(t.toLowerCase())&&(this.highlight?this.resList.push(e.toLowerCase().replace(r().value.toLowerCase(),'<span class="autoComplete_highlighted_result">'.concat(r().value.toLowerCase(),"</span>"))):this.resList.push(e),this.cleanResList.push(e))}},{key:"listMatchedResults",value:function(){var a=this;this.resList=[],this.cleanResList=[];var s=r().value;try{this.dataSrc().filter(function(t){var e=a.search(s,t);e&&(a.resList.push(e),a.cleanResList.push(t))})}catch(t){h("data source is not an Array")}l(this.resList.slice(0,this.maxResults),this.cleanResList.slice(0,this.maxResults),this.dataAttribute)}},{key:"searchInputValidation",value:function(t){var e=this;t.addEventListener("keyup",function(){0<t.value.length&&" "!==t.value?(c(),e.listMatchedResults(),e.onSelection&&u(e.onSelection)):c()})}},{key:"setPlaceHolder",value:function(){this.placeHolder&&r().setAttribute("placeholder",this.placeHolder)}},{key:"init",value:function(){try{this.dataSrc()&&(this.setPlaceHolder(),this.searchInputValidation(r()))}catch(t){h(t)}}}])&&i(t.prototype,a),s&&i(t,s),e}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
