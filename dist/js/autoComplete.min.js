var a,b;a=this,b=function(){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function r(e,t){for(var n=document.getElementsByClassName("autoComplete_list"),i=0;i<n.length;i++)e!==n[i]&&e!==t&&n[i].parentNode.removeChild(n[i])}function u(e,t,n){var i,r,o=n.value,a=(i=t.target,(r=document.createElement("div")).setAttribute("id","autoComplete_list"),r.setAttribute("class","autoComplete_list"),i.parentNode.appendChild(r),r);e.forEach(function(e){var t,n,i=function(e,t,n){var i=t.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var r=[],o=0,a=0;a<i.length;a++){var u=t[a];o<e.length&&i[a]===e[o]&&(u=n.highlight?"<span class=".concat(n.highlight,">").concat(u,"</span>"):u,o++),r.push(u)}if(o===e.length)return r.join("")}else{if(i.includes(e))return e=new RegExp("".concat(e),"i").exec(t),n.highlight?t.replace(e,"<span class=".concat(n.highlight,">").concat(e,"</span>")):t}}(o,e,{searchEngine:"strict",highlight:{class:"highlighted"}});if(i){var r=(t=i,(n=document.createElement("div")).setAttribute("class","autoComplete_result"),n.innerHTML=t,n);r.addEventListener("click",function(e){}),a.appendChild(r)}})}function n(e){e&&(function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autoComplete_selected")}(e),d>=e.length&&(d=0),d<0&&(d=e.length-1),e[d].classList.add("autoComplete_selected"))}function l(e){var t=document.getElementById("autoComplete_list");t=t&&t.getElementsByTagName("div"),40===e.keyCode?(d++,n(t)):38===e.keyCode?(e.preventDefault(),d--,n(t)):13===e.keyCode&&(e.preventDefault(),-1<d&&t&&t[d].click())}function s(e,t){Promise.resolve(e).then(function(e){t(e)})}var d;return function(){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=e.selector,n=void 0===t?inputField:t,i=e.data,r=i.src,o=i.cached;this.inputField=n,this.data={src:r,cached:o},this.preInit()}var e,t,n;return e=a,(t=[{key:"run",value:function(e,t,n){if(r(!1,t),!e.target.value)return!1;d=-1,u(n,e,t),t.addEventListener("keydown",l),document.addEventListener("click",function(e){r(e.target,t)})}},{key:"init",value:function(){var i=this,e="function"==typeof this.data.src?this.data.src():this.data.src;this.data.cached?s(e,function(n){i.inputField.addEventListener("input",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i.inputField;i.run(e,t,n)})}):this.inputField.addEventListener("input",function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i.inputField;s(e,function(e){i.run(t,n,e)})})}},{key:"preInit",value:function(){var r=this,e=document;new MutationObserver(function(e,t){var n,i=o(e);try{for(i.s();!(n=i.n()).done;){n.value;document.querySelector(r.inputField)&&(t.disconnect(),r.inputField=document.querySelector(r.inputField),r.init())}}catch(e){i.e(e)}finally{i.f()}}).observe(e,{childList:!0,subtree:!0})}}])&&i(e.prototype,t),n&&i(e,n),a}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
