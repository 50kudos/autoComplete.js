var a,b;a=this,b=function(){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var t,e,n,i={input:document.querySelector("#autoComplete")};(n=document.createElement("div")).setAttribute("class","autoComplete_results_list_container"),i.input.insertAdjacentElement("afterend",n),t=n,(e=document.createElement("ul")).setAttribute("class","autoComplete_results_list"),t.appendChild(e);var o=function(){return i.input.value=""},s=function(){document.querySelector(".autoComplete_results_list").innerHTML=""};["focus","blur"].forEach(function(t){var e=document.querySelector(".autoComplete_results_list");i.input.addEventListener(t,function(){e.style="blur"===t?"opacity: 0; visibility: hidden;":"opacity: 1; visibility: visible;"})});var l=function(){return i.input},u=function(o,r,a){var i,s=document.querySelector(".autoComplete_results_list");o.forEach(function(t,e){var n=document.createElement("li");n.setAttribute("data-".concat(a.tag),a.value||r[e]),n.setAttribute("tabindex",e+1),i=1===o.length?"autoComplete_result autoComplete_single_result":"autoComplete_result",n.setAttribute("id",r[e]),n.setAttribute("class",i),n.innerHTML=o[e],s.appendChild(n)})},c=function(e,n){document.querySelectorAll(".autoComplete_result").forEach(function(t){t.addEventListener("click",function(t){e(t.target.closest(".autoComplete_result")),o(),s(),i.input.setAttribute("placeholder","".concat(t.target.closest(".autoComplete_result").id.length>n?t.target.closest(".autoComplete_result").id.slice(0,n)+"...":t.target.closest(".autoComplete_result").id))})})},d=s,h=function(t){document.querySelector("body").innerHTML='\n\t<div class="autoComplete_error">\n\t\t<div class="autoComplete_message">'.concat(t,"</div>\n\t</div>\n\t")};return function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSrc=function(){if(Array.isArray(t.dataSrc))return t.dataSrc;h("<strong>Error</strong>, <strong>data source</strong> value is not an <strong>Array</string>.")},this.placeHolder="string"==typeof t.placeHolder?t.placeHolder:"Search...",this.placeHolderLength="number"==typeof t.placeHolderLength?t.placeHolderLength:1/0,this.maxResults="number"==typeof t.maxResults?t.maxResults:10,this.highlight="boolean"!=typeof t.highlight||t.highlight,this.dataAttribute="object"===r(t.dataAttribute)&&t.dataAttribute.constructor===Object?{tag:t.dataAttribute.tag,value:t.dataAttribute.value}:{tag:"autocomplete",value:""},this.onSelection="function"==typeof t.onSelection?t.onSelection:h("<strong>Error</strong>, <strong>onSelection</strong> value is not a <strong>Function</string>."),this.init()}var t,n,o;return t=e,(n=[{key:"dataSourceValidation",value:function(t){return Array.isArray(t)}},{key:"searchInputValidation",value:function(t){var e=this;t.addEventListener("keyup",function(){0<t.value.length&&" "!==t.value?(d(),e.listMatchedResults(),c(e.onSelection,e.placeHolderLength)):d()})}},{key:"search",value:function(t,e){t=t.replace(/ /g,"").toLowerCase();for(var n=[],o=0,r=0;r<e.length;r++){var a=e[r];o<t.length&&a.toLowerCase()===t[o]&&(this.highlight&&(a='<span class="autoComplete_highlighted_result">'+a+"</span>"),o++),n.push(a)}return o!==t.length?"":n.join("")}},{key:"listMatchedResults",value:function(){var n=this;this.resList=[],this.cleanResList=[];var o=l().value;try{this.dataSrc().filter(function(t){var e=n.search(o,t);e&&(n.resList.push(e),n.cleanResList.push(t))})}catch(t){h(t)}u(this.resList.slice(0,this.maxResults),this.cleanResList.slice(0,this.maxResults),this.dataAttribute)}},{key:"setPlaceHolder",value:function(){i.input.setAttribute("placeholder",this.placeHolder)}},{key:"init",value:function(){try{this.dataSourceValidation(this.dataSrc())&&(this.setPlaceHolder(),this.searchInputValidation(l()))}catch(t){h("<strong>error</strong>, autoComplete <strong>engine</strong> is not <strong>starting</strong>...")}}}])&&a(t.prototype,n),o&&a(t,o),e}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
