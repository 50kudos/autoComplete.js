var a,b;a=this,b=function(){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function h(e,t){for(var n=document.getElementsByClassName("autoComplete_list"),i=0;i<n.length;i++)e!==n[i]&&e!==t&&n[i].parentNode.removeChild(n[i])}function p(r,e,o){for(var t,n,i,a,l=e.target.value,u=(t=e.target,(n=document.createElement("div")).setAttribute("id","autoComplete_list"),n.setAttribute("class","autoComplete_list"),t.parentNode.appendChild(n),n),s=0;s<r.render.length;s++){var c=r.render[s],d=(i=c,a=void 0,(a=document.createElement("div")).setAttribute("class","autoComplete_result"),a.innerHTML=i,a);d.addEventListener("click",function(e){var t,n,i;t=e,n=l,i=r.raw,o({event:t,query:n,results:i})}),u.appendChild(d)}}function n(e){e&&(function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autoComplete_selected")}(e),m>=e.length&&(m=0),m<0&&(m=e.length-1),e[m].classList.add("autoComplete_selected"))}function f(e){var t=document.getElementById("autoComplete_list");t=t&&t.getElementsByTagName("div"),40===e.keyCode?(m++,n(t)):38===e.keyCode?(e.preventDefault(),m--,n(t)):13===e.keyCode&&(e.preventDefault(),-1<m&&t&&t[m].click())}function r(e,t){Promise.resolve(e).then(function(e){t(e)})}function o(n,i){var r;return function(){var e=this,t=arguments;clearTimeout(r),r=setTimeout(function(){return n.apply(e,t)},i)}}function v(e,t,n){e.dispatchEvent(new CustomEvent(n,{bubbles:!0,detail:t,cancelable:!0}))}var m;return function(){function z(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,z);var t=e.selector,n=void 0===t?"#autoComplete":t,i=e.data,r=i.src,o=i.key,a=i.cache,l=void 0===a||a,u=e.query,s=e.trigger,c=(s=void 0===s?{}:s).event,d=void 0===c?["input"]:c,h=s.condition,p=void 0!==h&&h,f=e.searchEngine,v=void 0===f?"strict":f,m=e.threshold,g=void 0===m?0:m,y=e.debounce,b=void 0===y?0:y,C=e.resultsList,E=(C=void 0===C?{}:C).render,w=void 0===E||E,L=C.container,k=void 0!==L&&L,F=C.destination,S=C.position,A=void 0===S?"afterend":S,_=C.element,H=void 0===_?"ul":_,T=C.navigation,I=void 0!==T&&T,x=e.sort,q=void 0!==x&&x,R=e.placeHolder,j=e.maxResults,M=void 0===j?5:j,N=e.resultItem,O=(N=void 0===N?{}:N).content,B=void 0!==O&&O,D=N.element,J=void 0===D?"li":D,P=e.noResults,V=e.highlight,U=void 0!==V&&V,$=e.onSelection;this.inputField=n,this.data={src:function(){return"function"==typeof r?r():r},key:o,cache:l},this.query=u,this.trigger={event:d,condition:p},this.searchEngine=v,this.threshold=g,this.debounce=b,this.resultsList={render:w,container:k,destination:F||this.inputField,position:A,element:H,navigation:I},this.sort=q,this.placeHolder=R,this.maxResults=M,this.resultItem={content:B,element:J},this.noResults=P,this.highlight=U,this.onSelection=$,this.preInit()}var e,t,n;return e=z,(t=[{key:"run",value:function(e,t,n){h(!1,t);var i,r,o,a,l,u,s=(i=t)instanceof HTMLInputElement||i instanceof HTMLTextAreaElement?i.value.toLowerCase():i.innerHTML.toLowerCase(),c=(r=this.query,o=s,r&&r.manipulate?r.manipulate(o):o);if(a=this.trigger,l=c,u=this.threshold,a.condition?a.condition(l):l.length>=u&&l.replace(/ /g,"").length){var d=function(e,t,n){for(var i={render:[],raw:[]},r=0;r<t.length;r++){var o=t[r],a=o.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var l=[],u=0,s=0;s<a.length;s++){var c=o[s];u<e.length&&a[s]===e[u]&&(c=n.highlight?'<span class="autoComplete_highlighted">'.concat(c,"</span>"):c,u++),l.push(c)}u===e.length&&(i.render.push(l.join("")),i.raw.push(o))}else if(a.includes(e)){e=new RegExp("".concat(e),"i").exec(o);var d=n.highlight?o.replace(e,'<span class="autoComplete_highlighted">'.concat(e,"</span>")):o;i.render.push(d),i.raw.push(o)}}return i}(s,n,{searchEngine:this.searchEngine,highlight:this.highlight});if(v(this.inputField,{inputValue:s,queryValue:c,searchResults:d.raw},"autoCompleteJS_input"),this.resultsList.render){if(!n.length)return this.noResults();p(d,e,this.onSelection),m=-1,t.addEventListener("keydown",f),document.addEventListener("click",function(e){h(e.target,t)})}}}},{key:"init",value:function(){var n=this;this.data.cache?o(r(this.data.src(),function(t){n.placeHolder&&n.inputField.setAttribute("placeholder",n.placeHolder),n.inputField.addEventListener("input",function(e){n.run(e,n.inputField,t)})}),this.debounce):(this.placeHolder&&this.inputField.setAttribute("placeholder",this.placeHolder),this.inputField.addEventListener("input",o(function(t){r(n.data.src(),function(e){n.run(t,n.inputField,e)})},this.debounce)))}},{key:"preInit",value:function(){var o=this,e=document;new MutationObserver(function(e,t){var n,i=a(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;document.querySelector(o.inputField)&&(t.disconnect(),o.inputField=document.querySelector(o.inputField),v(o.inputField,{mutation:r},"autoCompleteJS_connect"),o.init())}}catch(e){i.e(e)}finally{i.f()}}).observe(e,{childList:!0,subtree:!0})}}])&&i(e.prototype,t),n&&i(e,n),z}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
