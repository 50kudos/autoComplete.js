var a,b;a=this,b=function(){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){for(var n=document.getElementsByClassName("autoComplete_list"),i=0;i<n.length;i++)e!==n[i]&&e!==t&&n[i].parentNode.removeChild(n[i])}function o(e,t,n){var i,a,o=n.value,r=(i=t.target,(a=document.createElement("div")).setAttribute("id","autoComplete_list"),a.setAttribute("class","autoComplete_list"),i.parentNode.appendChild(a),a);e.forEach(function(e){var t,n,i=function(e,t,n){var i=t.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var a=[],o=0,r=0;r<i.length;r++){var c=t[r];o<e.length&&i[r]===e[o]&&(c=n.highlight?"<span class=".concat(n.highlight,">").concat(c,"</span>"):c,o++),a.push(c)}if(o===e.length)return a.join("")}else{if(i.includes(e))return e=new RegExp("".concat(e),"i").exec(t),n.highlight?t.replace(e,"<span class=".concat(n.highlight,">").concat(e,"</span>")):t}}(o,e,{searchEngine:"strict",highlight:{class:"highlighted"}});if(i){var a=(t=i,(n=document.createElement("div")).setAttribute("class","autoComplete_result"),n.innerHTML=t,n);a.addEventListener("click",function(e){}),r.appendChild(a)}})}function n(e){e&&(function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autoComplete_selected")}(e),s>=e.length&&(s=0),s<0&&(s=e.length-1),e[s].classList.add("autoComplete_selected"))}function c(e){var t=document.getElementById("autoComplete_list");t=t&&t.getElementsByTagName("div"),40===e.keyCode?(s++,n(t)):38===e.keyCode?(e.preventDefault(),s--,n(t)):13===e.keyCode&&(e.preventDefault(),-1<s&&t&&t[s].click())}function l(e,t){Promise.resolve(e()).then(function(e){t(e)})}var s;return function(){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=e.selector,n=void 0===t?inputField:t,i=e.data,a=i.src,o=i.cached;this.inputField=n,this.data={src:a,cached:o},this.preInit()}var e,t,n;return e=r,(t=[{key:"init",value:function(e,t,n){if(a(!1,t),!e.target.value)return!1;s=-1,o(n,e,t),t.addEventListener("keydown",c),document.addEventListener("click",function(e){a(e.target,t)})}},{key:"preInit",value:function(){var i=this;this.data.cached?l(this.data.src,function(n){i.inputField.addEventListener("input",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i.inputField;i.init(e,t,n)})}):this.inputField.addEventListener("input",function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:i.inputField;l(i.data.src,function(e){i.init(t,n,e)})})}}])&&i(e.prototype,t),n&&i(e,n),r}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
