var a,b;a=this,b=function(){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function i(e,t){for(var n=document.getElementsByClassName("autoComplete_list"),r=0;r<n.length;r++)e!==n[r]&&e!==t&&n[r].parentNode.removeChild(n[r])}function u(e,t,n){var r,i,o=n.value,a=(r=t.target,(i=document.createElement("div")).setAttribute("id","autoComplete_list"),i.setAttribute("class","autoComplete_list"),r.parentNode.appendChild(i),i);e.forEach(function(e){var t,n,r=function(e,t,n){var r=t.toLowerCase();if("loose"===n.searchEngine){e=e.replace(/ /g,"");for(var i=[],o=0,a=0;a<r.length;a++){var u=t[a];o<e.length&&r[a]===e[o]&&(u=n.highlight?"<span class=".concat(n.highlight,">").concat(u,"</span>"):u,o++),i.push(u)}if(o===e.length)return i.join("")}else{if(r.includes(e))return e=new RegExp("".concat(e),"i").exec(t),n.highlight?t.replace(e,"<span class=".concat(n.highlight,">").concat(e,"</span>")):t}}(o,e,{searchEngine:"strict",highlight:{class:"highlighted"}});if(r){var i=(t=r,(n=document.createElement("div")).setAttribute("class","autoComplete_result"),n.innerHTML=t,n);i.addEventListener("click",function(e){}),a.appendChild(i)}})}function n(e){e&&(function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autoComplete_selected")}(e),d>=e.length&&(d=0),d<0&&(d=e.length-1),e[d].classList.add("autoComplete_selected"))}function l(e){var t=document.getElementById("autoComplete_list");t=t&&t.getElementsByTagName("div"),40===e.keyCode?(d++,n(t)):38===e.keyCode?(e.preventDefault(),d--,n(t)):13===e.keyCode&&(e.preventDefault(),-1<d&&t&&t[d].click())}function s(e,t){Promise.resolve(e()).then(function(e){t(e)})}var d;return function(){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=e.selector,n=void 0===t?inputField:t,r=e.data,i=r.src,o=r.cached;this.inputField=n,this.data={src:i,cached:o},this.preInit()}var e,t,n;return e=a,(t=[{key:"run",value:function(e,t,n){if(i(!1,t),!e.target.value)return!1;d=-1,u(n,e,t),t.addEventListener("keydown",l),document.addEventListener("click",function(e){i(e.target,t)})}},{key:"init",value:function(){var r=this;this.data.cached?s(this.data.src,function(n){r.inputField.addEventListener("input",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:r.inputField;r.run(e,t,n)})}):this.inputField.addEventListener("input",function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:r.inputField;s(r.data.src,function(e){r.run(t,n,e)})})}},{key:"preInit",value:function(){var i=this,e=document;new MutationObserver(function(e,t){var n,r=o(e);try{for(r.s();!(n=r.n()).done;){n.value;document.querySelector(i.inputField)&&(t.disconnect(),i.inputField=document.querySelector(i.inputField),i.init())}}catch(e){r.e(e)}finally{r.f()}}).observe(e,{childList:!0,subtree:!0})}}])&&r(e.prototype,t),n&&r(e,n),a}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
