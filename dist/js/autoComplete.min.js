var a,b;a=this,b=function(){"use strict";function r(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var t,s=function(){return document.querySelector("#autoComplete")};(t=document.createElement("ul")).setAttribute("class","autoComplete_results_list"),s().insertAdjacentElement("afterend",t);var a=function(){return s().value=""},n=function(){document.querySelector(".autoComplete_results_list").innerHTML=""},o=s,i=function(a,r,n){var o,i=document.querySelector(".autoComplete_results_list");a.forEach(function(t,e){var s=document.createElement("li");s.setAttribute("data-".concat(n.tag),n.value||r[e]),o=1===a.length?"autoComplete_result autoComplete_single_result":"autoComplete_result",s.setAttribute("id",r[e]),s.setAttribute("class",o),s.innerHTML=a[e],i.appendChild(s)})},l=function(e){document.querySelectorAll(".autoComplete_result").forEach(function(t){t.addEventListener("click",function(t){e(t.target.closest(".autoComplete_result")),a(),n(),s().setAttribute("placeholder","".concat(t.target.closest(".autoComplete_result").id))})})},u=n,c=function(t){document.querySelector("body").innerHTML='\n\t\t<div class="autoComplete_error">\n\t\t\t<div class="autoComplete_message">'.concat(t,"</div>\n\t\t</div>\n\t")};return function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSrc=function(){return Array.isArray(t.dataSrc)?t.dataSrc:Array.isArray(t.dataSrc())?t.dataSrc():void c("<strong>Error</strong>, <strong>data source</strong> value is not an <strong>Array</string>.")},this.searchEngine="loose"===t.searchEngine?"loose":"strict",this.placeHolder=!!String(t.placeHolder)&&t.placeHolder,this.maxResults=Number(t.maxResults)?t.maxResults:10,this.highlight=!0===t.highlight,this.dataAttribute=t.dataAttribute===Object?{tag:t.dataAttribute.tag,value:t.dataAttribute.value}:{tag:"autocomplete",value:""},this.onSelection="function"==typeof t.onSelection?t.onSelection:c("<strong>Error</strong>, <strong>onSelection</strong> value is not a <strong>Function</string>."),this.init()}var t,s,a;return t=e,(s=[{key:"search",value:function(t,e){if("loose"===this.searchEngine){t=t.replace(/ /g,"").toLowerCase();for(var s=[],a=0,r=0;r<e.length;r++){var n=e[r];a<t.length&&n.toLowerCase()===t[a]&&(this.highlight&&(n='<span class="autoComplete_highlighted_result">'+n+"</span>"),a++),s.push(n)}return a!==t.length?"":s.join("")}e.toLowerCase().includes(t.toLowerCase())&&(this.highlight?this.resList.push(e.toLowerCase().replace(o().value.toLowerCase(),'<span class="autoComplete_highlighted_result">'.concat(o().value.toLowerCase(),"</span>"))):this.resList.push(e),this.cleanResList.push(e))}},{key:"listMatchedResults",value:function(){var s=this;this.resList=[],this.cleanResList=[];var a=o().value;try{this.dataSrc().filter(function(t){var e=s.search(a,t);e&&(s.resList.push(e),s.cleanResList.push(t))})}catch(t){c(t)}i(this.resList.slice(0,this.maxResults),this.cleanResList.slice(0,this.maxResults),this.dataAttribute)}},{key:"searchInputValidation",value:function(t){var e=this;t.addEventListener("keyup",function(){0<t.value.length&&" "!==t.value?(u(),e.listMatchedResults(),l(e.onSelection)):u()})}},{key:"setPlaceHolder",value:function(){this.placeHolder&&o().setAttribute("placeholder",this.placeHolder)}},{key:"init",value:function(){try{this.dataSrc()&&(this.setPlaceHolder(),this.searchInputValidation(o()))}catch(t){c("<strong>error</strong>, autoComplete <strong>engine</strong> is not <strong>starting</strong>...")}}}])&&r(t.prototype,s),a&&r(t,a),e}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.autoComplete=b();
